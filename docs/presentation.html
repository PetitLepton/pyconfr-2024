<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content="Paul Arnaud &amp; Flavien Lambert Data Engineering Team ">
  <title>Python &amp; kedro pour l’agriculture de précision</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-notes="Bonjour à toutes et à tous, c’est notre première participation à Pycon France en tant qu’orateurs et nous tenons à remercier les organistrices et organisateurs de nous donner cette opportunité. Paul et moi faisons partie de la petite équipe de data engineering de Sencrop dont nous allons vous parler dans une minute. Après la présentation du problème que nous voulions résoudre, nous introduirons l’outil python que nous avons utilisé pour cela et nous montrerons comment cela nous a permis de passer relativement facilement en production." class="quarto-title-block center">
  <h1 class="title">Python &amp; kedro<br>pour<br>l’agriculture de précision</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Paul Arnaud &amp; Flavien Lambert<br>Data Engineering Team<br><img src="./images/sencrop_logo_vertical_RVB.png" height="100px"> 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Agenda</h2>
<ul>
<li><a href="#/lagtech-au-pays-de-la-patate" id="/toc-lagtech-au-pays-de-la-patate">L’agtech au pays de la patate</a></li>
<li><a href="#/un-deux-trois-kedro" id="/toc-un-deux-trois-kedro">Un, deux, trois… <span style="color:yellow">◆</span> kedro!</a></li>
<li><a href="#/production-yaml-modifié-sérénité" id="/toc-production-yaml-modifié-sérénité">Production, YAML modifié, sérénité</a></li>
<li><a href="#/vers-des-pipelines-tout-terrain" id="/toc-vers-des-pipelines-tout-terrain">Vers des pipelines tout-terrain ?</a></li>

</ul>
</nav>
</section>
<section>
<section id="lagtech-au-pays-de-la-patate" class="title-slide slide level1 center">
<h1>L’agtech au pays de la patate</h1>
<aside class="notes">
<p>Pour commencer cette présentation j’aimerais vous parler un peu de Sencrop pour introduire les différentes problématiques auxquelles nous sommes confrontées aujourd’hui.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sencrop" class="slide level2" data-background-opacity="0.25" data-background-image="./images/raincrop.jpg">
<h2>Sencrop</h2>
<ul>
<li>35000 stations météorologiques réparties sur toute l’Europe</li>
</ul>
<div class="columns">
<div id="vcenter" class="column">
<div class="container">
  <img src="./images/grey-temp-hum-o.png" width="70em">
  <p>température de l'air &amp; hygrométrie</p>
  <img src="./images/grey-wind.png" width="70em">
  <p>direction et vitesse du vent</p>
  <img src="./images/grey-rain-o.png" width="70em">
  <p>pluviométrie</p>
  <img src="./images/grey-dew-point.png" width="70em">
  <p>point de rosée</p>
</div>
</div><div id="vcenter" class="column">
<div class="fragment fade-in">
<p><img data-src="./images/stations-h3-7.png"></p>
</div>
</div></div>
<aside class="notes">
<p>Sencrop c’est une startup de l’agtech fondée en 2016 dans le nord de la France, à Lille très exactement. Avec plus de 80 collaborateurs, Sencrop est le leader européen des stations météos connectées en couvrant l’Europe de l’ouest de plus de 35 000 capteurs.</p>
<p>Le principe est simple, nos utilisateurs (qui sont agriculteurs la plupart du temps) peuvent installer une station dans leur champ. Ces stations possèdent plusieurs capteurs comme vous pouvez le voir sur l’écran juste ici. Les mesures apparaissent ensuite sur une application sur téléphone ou ordinateur. Ces données météorologiques permettent à nos utilisateurs de prendre des décisions sur leur opération quotidienne. Ainsi, nos agriculteurs réussissent à optimiser leur l’irrigation afin de gagner certains volumes d’eau, mais également optimiser leur pulvérisation de produit phytosanitaire (qui coute très cher). Du côté agronomique, nous arrivons aussi à fournir de précieux conseils sur les périodes de risques maladies (pour protéger au mieux du mildiou par exemple) ou les périodes de gel (qui touchent régulierement nos vignerons).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="spatialisation" class="slide level2">
<h2>Spatialisation</h2>
<ul>
<li>Est-ce que l’on peut fournir de la donnée météorologique de qualité sur n’importe quelle localisation sur le territoire ?</li>
</ul>
<div class="fragment fade-in">
<div class="columns">
<div id="vcenter" class="column">
<ul>
<li>utilisation de maillage <code>h3</code> : index spatial hiérarchique</li>
<li>comparaison des mesures de stations avec les médianes sur les mailles</li>
</ul>
</div><div id="vcenter" class="column">
<p><img data-src="./images/pentagon_hexagon_children.png"></p>
</div></div>
</div>
<aside class="notes">
<p>Aujourd’hui Sencrop est présente dans plus de 10 pays à travers l’Europe, principale autour de la France. Malgré notre large réseau de stations, nous faisons face à un défi majeur : la couverture géographique n’est pas uniforme. Certaines régions françaises, par exemple, sont moins densément équipées que d’autres. Cette situation pose un problème crucial : comment fournir des données météorologiques précises pour n’importe quel point GPS, même en l’absence de station à proximité immédiate ? C’est là qu’intervient notre solution de génération de séries temporelles. L’objectif est ambitieux : créer un système capable de produire des données météorologiques fiables pour n’importe quelle coordonnée géographique en Europe de l’Ouest.</p>
<p>Pour relever ce défi de spatialisation des données, nous nous appuyons sur H3, le système de géo-indexation hiérarchique développé par Uber. Ce choix n’est pas anodin. H3 divise la surface terrestre en hexagones de taille uniforme. Ce qui rend H3 particulièrement pertinent pour notre usage, c’est que :</p>
<ul>
<li>Les hexagones minimisent la distorsion des distances entre le centre et les bords, contrairement aux carrés</li>
<li>Le système est hiérarchique avec 16 résolutions, allant d’hexagones de 1000km à moins d’un mètre de diamètre</li>
<li>Chaque hexagone a un identifiant unique, ce qui facilite l’indexation et la recherche</li>
<li>Les cellules voisines sont facilement identifiables grâce à l’algorithme de H3</li>
</ul>
<p>Dans notre cas, nous utilisons principalement la résolution 7, qui correspond à des hexagones d’environ 5km de diamètre. Cette échelle nous permet de :</p>
<ul>
<li>Agréger efficacement les données de nos stations au sein d’une même cellule</li>
<li>Créer une grille régulière pour l’interpolation des données</li>
<li>Optimiser les performances de calcul tout en maintenant une précision pertinente pour l’agriculture</li>
</ul>
<p>L’utilisation de H3 nous permet ainsi de structurer spatialement nos données météorologiques de manière efficace et d’appliquer nos algorithmes d’interpolation avec une plus grande confiance dans les résultats.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="un-deux-trois-kedro" class="title-slide slide level1 center">
<h1>Un, deux, trois… <span style="color:yellow">◆</span> kedro!</h1>

</section>
<section id="kedro-en-trois-mots" class="slide level2">
<h2>kedro en trois mots</h2>
<div class="fragment">
<ul>
<li>librairie de transformations de données
<ul>
<li>découplage entre les sources de données et les transformations</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<div class="columns">
<div id="vcenter" class="column">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    node2[node]
    node7[node]
    
    input1[(dataset)]
    input2[(dataset)]
    output[(dataset)]
    
    input1 --&gt; node2
    input2 --&gt; node2

  subgraph pipeline[pipeline]
    direction LR
    node2 --&gt; node7
    %% node3 --&gt; node5 --&gt; node7
    %% input3 --&gt; node5
  end

  node7 --&gt; output

  style pipeline color:#000
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div id="vcenter" class="column">
<!-- :::{.fragment} -->
<ul>
<li><code>node</code>
<ul>
<li>fonction — au sens Python — avec un/des <code>dataset</code> d’entrée/sortie</li>
</ul></li>
<li><code>pipeline</code>
<ul>
<li>séquence de <code>node</code></li>
</ul></li>
<li><code>catalog</code>
<ul>
<li>un ensemble de <code>dataset</code></li>
</ul></li>
</ul>
</div></div>
</div>
<aside class="notes">
<p>kedro est une librairie open-source qui a été initialement développée par Quantum Black, la branche AI de Mc Kinsey (probablement financé par le contribuable français) qui a été depuis transmise à la Linux Foundation. Je devais être destiné à utiliser kedro parce que, comme les trous noirs quantiques, je n’ai pas de cheveux.</p>
<p>kedro permet de construire efficacement des pipelines de transformations de données. Pour celleeux qui ne seraient pas familières avec la notion de pipeline, le schéma de gauche en présente un pipelines simplifié. Le pipeline est ici très simple, il contient deux noeuds séquentiels qui sont alimentés en amont par deux jeux de données et qui résultent en la création d’un troisième.</p>
<p>kedro reprend, mot pour mot, ces trois concepts: des nœuds, des pipelines et un catalogue dont nous allons expliquer la signification dans quelques instants.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pipelines-nodes" class="slide level2">
<h2>pipelines &amp; nodes</h2>
<div class="columns">
<div id="vcenter" class="column">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TB
    node2[map_locations_to_grids]
    node7[extract_unique_grid_ids]
    
    input1[(locations)]
    input2[h3-grid-resolution]
    output[(unique-grid-ids)]
    
  subgraph pipeline[map_locations_to_grids]
    direction TB
    node2 --&gt; node7
    %% node3 --&gt; node5 --&gt; node7
    input1 --&gt; node2
    input2 --&gt; node2
    %% input3 --&gt; node5
    node7 --&gt; output
  end

  style pipeline color:#000
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div id="vcenter" class="column">
<div class="r-stack">
<div class="fragment fade-out">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/src/pipelines/map_locations_to_grids/pipeline.py</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="/src/pipelines/map_locations_to_grids/pipeline.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Any</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="im">from</span> kedro.pipeline <span class="im">import</span> Pipeline, node</span>
<span id="cb1-3"><a aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .nodes <span class="im">import</span> map_locations_to_grids, extract_unique_grid_ids</span>
<span id="cb1-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_pipeline(<span class="op">**</span>kwargs: Any) <span class="op">-&gt;</span> Pipeline:</span>
<span id="cb1-7"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Pipeline(</span>
<span id="cb1-8"><a aria-hidden="true" tabindex="-1"></a>        nodes<span class="op">=</span>[</span>
<span id="cb1-9"><a aria-hidden="true" tabindex="-1"></a>            node(</span>
<span id="cb1-10"><a aria-hidden="true" tabindex="-1"></a>                map_locations_to_grids,</span>
<span id="cb1-11"><a aria-hidden="true" tabindex="-1"></a>                inputs<span class="op">=</span>{</span>
<span id="cb1-12"><a aria-hidden="true" tabindex="-1"></a>                    <span class="st">"locations"</span>: <span class="st">"locations"</span>,</span>
<span id="cb1-13"><a aria-hidden="true" tabindex="-1"></a>                    <span class="st">"resolution"</span>: <span class="st">"params:h3-grid-resolution"</span>,</span>
<span id="cb1-14"><a aria-hidden="true" tabindex="-1"></a>                },</span>
<span id="cb1-15"><a aria-hidden="true" tabindex="-1"></a>                outputs<span class="op">=</span><span class="st">"grids"</span>,</span>
<span id="cb1-16"><a aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb1-17"><a aria-hidden="true" tabindex="-1"></a>            node(</span>
<span id="cb1-18"><a aria-hidden="true" tabindex="-1"></a>                extract_unique_grid_ids,</span>
<span id="cb1-19"><a aria-hidden="true" tabindex="-1"></a>                inputs<span class="op">=</span>{<span class="st">"grids"</span>: <span class="st">"grids"</span>},</span>
<span id="cb1-20"><a aria-hidden="true" tabindex="-1"></a>                outputs<span class="op">=</span><span class="st">"unique-grid-ids"</span>,</span>
<span id="cb1-21"><a aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb1-22"><a aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb1-23"><a aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="vcenter" class="fragment fade-in">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/src/pipelines/map_locations_to_grids/nodes.py</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="/src/pipelines/map_locations_to_grids/nodes.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> h3</span>
<span id="cb2-2"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb2-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_locations_to_grids(</span>
<span id="cb2-6"><a aria-hidden="true" tabindex="-1"></a>    locations: pandas.DataFrame, resolution: <span class="bu">int</span></span>
<span id="cb2-7"><a aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pandas.DataFrame:</span>
<span id="cb2-8"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pandas.DataFrame(</span>
<span id="cb2-9"><a aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>[</span>
<span id="cb2-10"><a aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb2-11"><a aria-hidden="true" tabindex="-1"></a>                <span class="st">"location_id"</span>: location[<span class="st">"id"</span>],</span>
<span id="cb2-12"><a aria-hidden="true" tabindex="-1"></a>                <span class="st">"grid_id"</span>: h3.geo_to_h3(</span>
<span id="cb2-13"><a aria-hidden="true" tabindex="-1"></a>                    lat<span class="op">=</span>location[<span class="st">"latitude"</span>],</span>
<span id="cb2-14"><a aria-hidden="true" tabindex="-1"></a>                    lng<span class="op">=</span>location[<span class="st">"longitude"</span>],</span>
<span id="cb2-15"><a aria-hidden="true" tabindex="-1"></a>                    resolution<span class="op">=</span>resolution,</span>
<span id="cb2-16"><a aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb2-17"><a aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb2-18"><a aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> location <span class="kw">in</span> locations.to_dict(orient<span class="op">=</span><span class="st">"records"</span>)</span>
<span id="cb2-19"><a aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb2-20"><a aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-21"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_unique_grid_ids(grids: pandas.DataFrame) <span class="op">-&gt;</span> pandas.DataFrame:</span>
<span id="cb2-23"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grids[<span class="st">"grid_id"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div></div>
<aside class="notes">
<p>Un pipeline est une class Python constituée de séquences de node. La structure du DAG, ce qui en fait un pipeline, ce sont les entrées/sorties.</p>
<p>Si la sortie d’un nœud fait partie des entrées d’un autre alors ces deux nœuds seront exécutés séquentiellement. Dans l’exemple à gauche, le nœud map_locations_to_grids intervient avant extract_unique_grid_ids parce que sa sortie grids est le jeu de donnée d’entrée d’extract_unique_grid_ids.</p>
<p>Un nœud au sens de kedro juste une fonction python qui peut avoir des entrées et des sorties. Elle est totalement indépendante du reste et peut/doit donc être testée de manière unitaire.</p>
<p>Vous remarquerez que les entrées/sorties sont définies par des chaînes de caractères, des noms de datasets. Que représentent-ils et comment passe-t-on d’une chaîne de caractère à un DataFrame pandas comme dans l’exemple. Et bien, c’est le catalogue !</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="catalog-environment" class="slide level2">
<h2>catalog &amp; environment</h2>
<ul>
<li><code>catalog</code> : définition des <code>dataset</code> d’entrée et de sortie</li>
<li><code>environment</code> : ensemble du <code>catalog</code> et d’un jeu de paramètres</li>
</ul>
<div class="columns">
<div class="column">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/conf/test-local/catalog.yaml</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="/conf/test-local/catalog.yaml"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">locations</span><span class="kw">:</span></span>
<span id="cb3-2"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.JSONDataset</span></span>
<span id="cb3-3"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> data/01_raw/test_local/two_locations.json</span></span>
<span id="cb3-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a aria-hidden="true" tabindex="-1"></a><span class="fu">grids</span><span class="kw">:</span></span>
<span id="cb3-6"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.JSONDataset</span></span>
<span id="cb3-7"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> data/02_intermediate/grids.json</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a aria-hidden="true" tabindex="-1"></a><span class="ex">kedro</span> run <span class="at">--pipeline</span> map_locations_to_grids <span class="at">--env</span> test-local</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="fragment fade-in">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/conf/production/catalog.yaml</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="/conf/production/catalog.yaml" width="200px"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">locations</span><span class="kw">:</span></span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.JSONDataset</span></span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> s3://virtual-stations/locations.json</span></span>
<span id="cb5-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a aria-hidden="true" tabindex="-1"></a><span class="ex">kedro</span> run <span class="at">--pipeline</span> map_locations_to_grids <span class="at">--env</span> production</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
<aside class="notes">
<p>Le catalogue est une liste de tous les datasets qui sont matérialisés — c’est à dire pas seulement en mémoire. Il se présente sous la forme d’un fichier yaml dont chaque clef principale correspond aux noms que vous trouvez dans les pipelines. L’élément le plus important est le type, c’est lui va déterminer comment on passe d’un nom à une structure python.</p>
<p>Dans notre exemple, la dataset est un pandas.JSONDataset. C’est une classe qui utilise pandas pour lire un fichier JSON, qui ici, se trouve localement dans un dossier. Le dataset est en charge de lire le fichier JSON et de trasnformer le résultat en un DataFrame pandas.</p>
<p>Vous remarquerez que le catalogue es défini dans un dossier conf/test-local. Pour exécuter le pipeline, vous utilisez la CLI de kedro en précisant l’environnement, c’est-à-dire le nom du sous-dossier, ici test-local. Et c’est ici que réside l’un des forces les plus tangibles de kedro. Vous avez remarqué que le pipeline précédent est indépendant des sources de données, la seule chose importante est que le dataset renvoie dans notre cas un dataframe. Je peux donc définir un autre catalogue avec un autre type de dataset qui va lui aussi me fournir une dataframe. Par exemple, je peux créer un catalogue avec un fichier JSON dans un bucket s3 et jouer mon pipeline avec ce nouvel environnement !</p>
<p>Notez que tous ces datasets existent déjà, c’est une librairie appelée kedro-datasets qui est maintenue par les équipes de quantum black et la communauté.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="structure-du-projet" class="slide level2">
<h2>structure du projet</h2>
<ul>
<li>séparation des sources de données et des pipelines</li>
</ul>
<div class="sourceCode" id="cb7" data-code-line-numbers="4,15,17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a></a><span class="bu">.</span></span>
<span id="cb7-2"><a></a><span class="ex">├──</span> conf</span>
<span id="cb7-3"><a></a><span class="ex">│&nbsp;&nbsp;</span> ├── base</span>
<span id="cb7-4"><a></a><span class="ex">│&nbsp;&nbsp;</span> │&nbsp;&nbsp; ├── catalog.yml</span>
<span id="cb7-5"><a></a><span class="ex">│&nbsp;&nbsp;</span> │&nbsp;&nbsp; └── parameters.yml</span>
<span id="cb7-6"><a></a><span class="ex">│&nbsp;&nbsp;</span> └── local</span>
<span id="cb7-7"><a></a><span class="ex">│&nbsp;&nbsp;</span>  &nbsp;&nbsp; └── credentials.yml</span>
<span id="cb7-8"><a></a><span class="ex">├──</span> data</span>
<span id="cb7-9"><a></a><span class="ex">│&nbsp;&nbsp;</span> ├── 01_raw</span>
<span id="cb7-10"><a></a><span class="ex">│&nbsp;&nbsp;</span> └── ...</span>
<span id="cb7-11"><a></a><span class="ex">├──</span> notebooks</span>
<span id="cb7-12"><a></a><span class="ex">├──</span> pyproject.toml</span>
<span id="cb7-13"><a></a><span class="ex">└──</span> src</span>
<span id="cb7-14"><a></a> <span class="ex">&nbsp;&nbsp;</span> └── my_project</span>
<span id="cb7-15"><a></a> <span class="ex">&nbsp;&nbsp;</span>     ├── pipeline_registry.py</span>
<span id="cb7-16"><a></a> <span class="ex">&nbsp;&nbsp;</span>     └── pipelines</span>
<span id="cb7-17"><a></a> <span class="ex">&nbsp;&nbsp;</span>      &nbsp;&nbsp; └── my_pipeline</span>
<span id="cb7-18"><a></a> <span class="ex">&nbsp;&nbsp;</span>      &nbsp;&nbsp; &nbsp; &nbsp; ├── nodes.py</span>
<span id="cb7-19"><a></a> <span class="ex">&nbsp;&nbsp;</span>      &nbsp;&nbsp; &nbsp;&nbsp;  └── pipeline.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Vous l’avez compris, kedro impose une séparation claire des datasets et des pipelines, des sources/sink et des transformations. Cela se retrouve dans la structure d’un projet. Tous les catalogues se trouvent dans le dossier conf. Dans l’exemple précédent, j’aurais créé le dossier test-local.</p>
<p>Les pipelines sont dans le dossier pipelines et sont répertoriés dans le fichier registry.</p>
<p>L’avantage de cette structure fixe est qu’elle permet à une personne qui connaît un peu kedro de voyager dans le projet facilement.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="production-yaml-modifié-sérénité" class="title-slide slide level1 center">
<h1>Production, YAML modifié, sérénité</h1>

</section>
<section id="dumas-du-tuyau-trois-écrivains-et-un-lecteur" class="slide level2">
<h2>Dumas du tuyau : trois écrivains et un lecteur</h2>
<div class="r-stretch">
<div class="cell" data-reveal="true" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR

    measures[(&lt;br&gt;mesures&lt;br&gt;des stations)]
    getstatistics[&lt;br&gt;calculs&lt;br&gt;des statistiques]

    meteoblue[(&lt;br&gt;meteoblue&lt;br&gt;API)]
  getforecasts[&lt;br&gt;récupération&lt;br&gt;des prévisions]
  gethistory[&lt;br&gt;récupération&lt;br&gt;de l'historique]

    forecasts[(&lt;br&gt;prévisions)]
    history[(&lt;br&gt;historique)]
    statistics[(&lt;br&gt;statistiques)]

    measures --&gt; getstatistics --&gt; statistics
    meteoblue --&gt; getforecasts --&gt; forecasts
    meteoblue --&gt; gethistory --&gt; history
    
    combine[&lt;br&gt;combinaison&lt;br&gt;des sources] --&gt; timeseries[(&lt;br&gt;série temporelle&lt;br&gt;finale)]
  statistics --&gt; combine
    forecasts --&gt; combine
    history --&gt; combine
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Pour générer des séries temporelles précises pour n’importe quel point GPS, nous avons mis en place une architecture qui combine plusieurs sources de données. Laissez-moi vous expliquer notre pipeline de données. Tout d’abord, nous exploitons deux sources principales :</p>
<p>Nos stations Sencrop :</p>
<p>Nous collectons en temps réel les mesures de nos stations déployées sur le terrain Ces données brutes sont traitées pour calculer des statistiques pertinentes (principalement des médianes)</p>
<p>L’API Meteoblue : Cette source externe nous fournit deux types de données :</p>
<p>Des prévisions météorologiques pour compléter nos données en temps réel Un historique météorologique pour le passé</p>
<p>L’étape cruciale de notre système est la combinaison de ces sources. Notre algorithme fusionne intelligemment :</p>
<p>Les statistiques issues de nos stations Les prévisions Meteoblue L’historique Meteoblue</p>
<p>Cette approche multi-sources nous permet de générer une série temporelle finale qui bénéficie :</p>
<p>De la précision de nos mesures terrain là où nous avons des stations De la couverture géographique complète offerte par Meteoblue D’une continuité temporelle entre passé, présent et futur</p>
<p>Le résultat est une série temporelle cohérente et fiable, disponible pour n’importe quel point géographique de notre zone de couverture.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside class="notes">
<p>Passage sur Kedro-viz Laissez-moi maintenant vous présenter l’architecture de notre pipeline de données, visualisée ici grâce à Kedro-viz.&nbsp; Pour ceux qui ne connaissent pas, Kedro-viz est un outil fantastique qui nous permet de visualiser nos pipelines de données de manière claire et interactive, ce qui rend la compréhension de systèmes complexes beaucoup plus accessible.</p>
<p>Dans notre pipeline, tout commence avec les ‘Locations’ - ce sont les points GPS pour lesquels nous voulons générer des séries temporelles. Ces coordonnées constituent l’entrée principale de notre système. Ces points GPS sont ensuite convertis en ‘Grids’ - il s’agit des fameuses cellules hexagonales H3 dont nous parlions précédemment. Cette étape de conversion est cruciale car elle nous permet de passer d’une logique de points GPS arbitraires à une structure spatiale régulière et optimisée. Le pipeline se complexifie ensuite avec plusieurs étapes de traitement :</p>
<p>La récupération des séries temporelles sur les cellules H3 pour les différentes sources.</p>
<p>Ces traitements convergent vers la production de séries temporelles ordonnées (‘Ordered Time Series On Grids’), qui sont ensuite affinées pour produire les séries temporelles finales. Le point d’orgue de ce pipeline est la dernière étape : ‘Time Series On Locations’. C’est ici que nous revenons à notre objectif initial - fournir des données météorologiques précises pour chaque point GPS demandé. Pour chaque localisation, nous stockons une série temporelle complète, combinant ainsi la puissance de notre infrastructure de données avec la précision géographique dont nos utilisateurs ont besoin.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="kafka-sur-le-rivage" class="slide level2">
<h2>Kafka sur le rivage</h2>
<ul>
<li>kafka n’est pas le sujet mais c’est notre dataset de production !</li>
</ul>
<div class="columns">
<div class="column">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/conf/test-measures/catalog.yml</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="/conf/test-measures/catalog.yml" data-code-line-numbers="1,3,5,6"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb8-1"><a></a><span class="fu">locations</span><span class="kw">:</span></span>
<span id="cb8-2"><a></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.JSONDataset</span></span>
<span id="cb8-3"><a></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> data/01_raw/test_measures/locations.json</span></span>
<span id="cb8-4"><a></a></span>
<span id="cb8-5"><a></a><span class="fu">formatted_measures_on_grids</span><span class="kw">:</span></span>
<span id="cb8-6"><a></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.CSVDataset</span></span>
<span id="cb8-7"><a></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> data/03_primary/test_measures/measures_on_grids.csv</span></span>
<span id="cb8-8"><a></a></span>
<span id="cb8-9"><a></a><span class="at">  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a><span class="ex">kedro</span> run <span class="at">--pipeline</span> fetch_measures_on_grids <span class="at">--env</span> test-measures</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>/conf/production/catalog.yml</strong></pre>
</div>
<div class="sourceCode" id="cb10" data-filename="/conf/production/catalog.yml" data-code-line-numbers="1,3,5,6"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb10-1"><a></a><span class="fu">locations</span><span class="kw">:</span></span>
<span id="cb10-2"><a></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pandas.JSONDataset</span></span>
<span id="cb10-3"><a></a><span class="at">  </span><span class="fu">filepath</span><span class="kw">:</span><span class="at"> s3://virtual-stations/virtual-stations.json</span></span>
<span id="cb10-4"><a></a></span>
<span id="cb10-5"><a></a><span class="fu">formatted_measures_on_grids</span><span class="kw">:</span></span>
<span id="cb10-6"><a></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> datasets.ConfluentKafkaAvroDataset</span></span>
<span id="cb10-7"><a></a><span class="at">  </span><span class="fu">save_args</span><span class="kw">:</span></span>
<span id="cb10-8"><a></a><span class="at">    </span><span class="fu">topic</span><span class="kw">:</span><span class="at"> h3_cells_time_series</span></span>
<span id="cb10-9"><a></a><span class="at">    ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a><span class="ex">kedro</span> run <span class="at">--pipeline</span> fetch_measures_on_grids <span class="at">--env</span> production</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<aside class="notes">
<p>Parlons maintenant du déploiement en production, et vous allez voir que c’est là que la puissance du framework Kedro prend tout son sens. Comme vous pouvez le voir à l’écran, le passage de l’environnement de test à la production se fait de manière élégante et simple grâce à une simple modification des fichiers de configuration. Concrètement :</p>
<p>En environnement de test, nous lisons et écrivons nos données dans des fichiers locaux simples (JSON, CSV) En production, nous conservons exactement la même logique de pipeline, mais nous connectons nos données à Kafka via ConfluentKafkaAvroDataset, qui est une implémentation personnalisée de Dataset, qui nous permet d’écrire dans Kafka tout en garantissant la cohérence des données via Schema Registry.</p>
<p>Cette approche présente plusieurs avantages :</p>
<p>Le code reste strictement identique entre les environnements Seule la configuration change, ce qui réduit les risques d’erreur Les tests peuvent être effectués en local avec des fichiers plats</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="vers-des-pipelines-tout-terrain" class="title-slide slide level1 center">
<h1>Vers des pipelines tout-terrain ?</h1>

</section>
<section id="la-perspective-du-manager-et-de-lingénieur" class="slide level2">
<h2>La perspective du manager et de l’ingénieur</h2>
<div class="fragment">
<ul>
<li>structure rigide : expérience de développement excellente
<ul>
<li>PoC à la production en un temps relativement court</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>réactivité de la communauté : Slack avec 2200 inscrit·es</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>vers un pipeline agnostique
<ul>
<li>code des <code>node</code> dépend encore des libraries : <code>pandas</code>/<code>polars</code>/<code>spark</code></li>
<li>nouvelles librairies pour palier cette dépendance : <a href="https://ibis-project.org/"><code>ibis</code></a>, <a href="https://github.com/narwhals-dev/narwhals"><code>narwhal</code></a></li>
</ul></li>
</ul>
</div>
</section></section>
<section>
<section id="section" class="title-slide slide level1 center" data-background-opacity="0.25" data-background-image="./images/raincrop.jpg">
<h1></h1>
<div class="r-fit-text">
<p>Merci de votre attention !</p>
</div>
</section>
<section id="lensemble-du-tuyau" class="slide level2">
<h2>L’ensemble du tuyau</h2>


<img data-src="./images/virtual-stations.png" class="quarto-figure quarto-figure-center r-stretch"><div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: false,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1244,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>